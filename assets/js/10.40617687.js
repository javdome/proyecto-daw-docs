(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{194:function(a,t,s){"use strict";s.r(t);var n=s(0),e=Object(n.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"codificacion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#codificacion","aria-hidden":"true"}},[a._v("#")]),a._v(" Codificación")]),a._v(" "),s("p",[a._v("A continuación se desarrolla las partes del aplicativo que considero más\ninteresantes desde el punto de vista de la codificación: El planificador\ny la gestión de escenarios de planificaciones")]),a._v(" "),s("h2",{attrs:{id:"planificador"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#planificador","aria-hidden":"true"}},[a._v("#")]),a._v(" Planificador")]),a._v(" "),s("p",[a._v("Respecto a la codificación, el planificador es la parte que más tiempo\nha consumido.")]),a._v(" "),s("p",[s("img",{attrs:{src:"/proyecto-daw-docs/media/image23.jpeg",alt:"Planificador01"}})]),a._v(" "),s("p",[s("em",[a._v("Figura 22 - Vista del planificador")])]),a._v(" "),s("p",[a._v("El proceso de desarrollo del planificador ha constado de:")]),a._v(" "),s("p",[s("strong",[a._v("1.  Configuración de las opciones de ambas líneas de tiempo.")])]),a._v(" "),s("p",[a._v("Como se puede observar en la documentación oficial\n(http://visjs.org/docs/timeline/) existen multitud de opciones de\nconfiguración. Esta configuración se realiza mediante un objeto\n"),s("em",[a._v("Options")]),a._v(" que posteriormente se cargará en el objeto "),s("em",[a._v("Timeline")]),a._v(". Entre\nlas opciones empleadas están:")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("Items editables.")])]),a._v(" "),s("li",[s("p",[a._v("Multiselección de ítems.")])]),a._v(" "),s("li",[s("p",[a._v("Tooltips activos.")])]),a._v(" "),s("li",[s("p",[a._v("Escala de la línea de tiempo en días.")])]),a._v(" "),s("li",[s("p",[a._v("Zoom máximo y mínimo.")])])]),a._v(" "),s("p",[a._v('Para el eje vertical, cada uno de los elementos (los instructores en\nel Timeline superior, y las aulas para el Timeline inferior) se\nprecargan mediante un template de forma que cada elemento tenga su\nfuncionalidad. Esto permite que cada instructor y cada aula se pueda\nocultar, o que lo instructores incorporen sus "badgets" informativos.')]),a._v(" "),s("p",[s("strong",[a._v("2.  Creación de los DataSet para cada uno de los Timelines.")])]),a._v(" "),s("p",[a._v('Además de las opciones, cada objeto Timeline se debe cargar con sus\nítems. Para ello se crean primeramente un objeto DataSet mediante un\narray de objetos. Los DataSet, pertenecen a la librería Vis, y se\npodría decir que son unos arrays "vitaminados" que incorporan sus\npropios métodos y eventos (http://visjs.org/docs/data/dataset.html).')]),a._v(" "),s("p",[a._v("La siguiente figura ilustra la procedencia de los datos de ambos\nDataSet.")]),a._v(" "),s("p",[s("img",{attrs:{src:"/proyecto-daw-docs/media/image24.jpeg",alt:"DataSet"}})]),a._v(" "),s("p",[s("em",[a._v("Figura 23 - Creación de los DataSet de instructores y aulas")])]),a._v(" "),s("p",[a._v("Es importante resaltar que una tarea concreta representada en ambas\nTimeline, al venir de la misma fuente de datos, tienen el mismo\nidentificador. De esta forma podemos relacionar los ítems entre ambas\nTimelines.")]),a._v(" "),s("p",[s("strong",[a._v("3.  Creación de las Timeline.")])]),a._v(" "),s("p",[a._v("Una vez tenemos los objetos "),s("em",[a._v("Options")]),a._v(" y los "),s("em",[a._v("DataSets")]),a._v(" se pueden crear\nlos Timelines:")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" Timeline_1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("vis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("Timeline")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" container_1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" DataSet_1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" groups_1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" options_1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" Timeline_2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("vis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("Timeline")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" container_2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" DataSet_2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" groups_2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" options_2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("div",{staticClass:"warning custom-block"},[s("p",[s("em",[a._v("container")]),a._v(' son los elementos "div" y los '),s("em",[a._v("groups")]),a._v(" son los\nelementos del eje vertical (instructores y aulas, respectivamente).")])]),a._v(" "),s("p",[a._v("Para sincronizar el movimiento de ambas Timelines se emplea el evento\n"),s("em",[a._v("rangechange")]),a._v(" y el método "),s("em",[a._v("setWindow")]),a._v(", disponibles en los objetos\nTimeline.")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("Timeline_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'rangechange'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("onrangechange2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nTimeline_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'rangechange'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("onrangechange1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("onrangechange1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" range "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Timeline_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getWindow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    Timeline_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setWindow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("range"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" range"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("end"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("animation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("onrangechange2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" range "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Timeline_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getWindow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    Timeline_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setWindow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("range"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" range"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("end"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("animation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[s("strong",[a._v("4.  Sincronización de las tareas entre los dos Timelines")])]),a._v(" "),s("p",[a._v("Respecto a la codificación, lo más complejo ha sido sincronizar los\nmovimientos de las tareas (ítems) de la líneas de tiempo entre sí, así\ncomo el hecho de añadir o quitar el icono del maletín que indica que\nel instructor está fuera de zona.")]),a._v(" "),s("p",[a._v("Como se ha comentado, ambas líneas de tiempo son instancias\nindependientes ( Timeline_1 y Timeline_2 ), y cada una de ellas se\ncarga con sus tareas ( DataSet_1 y DataSet_2 ).")]),a._v(" "),s("p",[a._v('Para la sincronización de las tareas, cada vez que se produce una\nmodificación en alguna de ellas (p.j. en DataSet_1), se genera un\nevento. Este evento es "cazado" y se actualiza la tarea\ncorrespondiente de la otra línea de tiempo (p.j. DataSet_2).\nRecordemos que el id de la tarea es el mismo en ambos DataSet.')]),a._v(" "),s("p",[a._v("Este proceso también debe ocurrir en sentido contrario, es decir, si\nse modifica DataSet_2, se debe actualizar DataSet_1.")]),a._v(" "),s("p",[s("img",{attrs:{src:"/proyecto-daw-docs/media/image25.jpeg",alt:"SincronizacionItems"}})]),a._v(" "),s("p",[s("em",[a._v("Figura 24 - Proceso de sincronización de Items entre ambas Timeline")])]),a._v(" "),s("p",[a._v("Todo este proceso generó los siguientes problemas que se tuvieron que\nsolucionar:")]),a._v(" "),s("p",[a._v("Un problema es el bucle que se muestra en la imagen, es decir, si se\nmodifica DataSet_1, se actualiza DataSet_2. Esto genera que se\nactualice DataSet_1 y, así, sucesivamente.")]),a._v(" "),s("p",[a._v("Para solucionar este problema, cuando se realiza la actualización del\nDataSet opuesto, se debe desactivar su listener, realizar su\nactualización, y, a continuación, volver a activar el listener.")]),a._v(" "),s("p",[a._v("Sin embargo, aun desactivando el listener del DataSet opuesto, seguía\nteniendo problemas generados por bucles en la codificación. Estos eran\ndebidos a que cuando se realiza una modificación de una tarea, el\nicono de la maleta siempre es actualizado en el mismo DataSet. Por lo\nque se generaba un nuevo evento, que volvía a generar un bucle dentro\ndel mismo DataSet.")]),a._v(" "),s("p",[a._v("Para solucionar esto, no solo se debe desactivar el listener del\nDataSet opuesto, sino también el listener del mismo DataSet de donde\nse está realizando la modificación. Al igual que antes, al finalizar\nla actualización de la tarea, se debe reactivar el listener.")]),a._v(" "),s("p",[a._v("También este apartado de planificación he requerido de un tiempo de\ncodificación en el backend. Las partes más destacables al respecto han\nsido, por un lado, la adaptación de los datos de la base de datos al\nformato requerido para crear los itemSet que se van a cargar en las\nlíneas de tiempo. Así como la fase de almacenaje de datos, en este\ncaso los datos son enviados vía Ajax al servidor y se han de volver a\ntransformar para que sean guardados.")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Funciones de sincronización de tareas (ítems)")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("modif_Item")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("argumentos")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    DataSet_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("off")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    DataSet_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("off")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("L")]),a._v("ógica de actualización de maleta en DataSet_1\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("L")]),a._v("ógica de actualización de item en DataSet_2\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n\n    DataSet_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    DataSet_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("modif_Item2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("argumentos")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    DataSet_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("off")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    DataSet_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("off")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("L")]),a._v("ógica de actualización de maleta en DataSet_2\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("L")]),a._v("ógica de actualización de item en DataSet_1\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n\n    DataSet_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    DataSet_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" modifItem2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Activación de listeners en DataSets")]),a._v("\nDataSet_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("modifItem "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nDataSet_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("modifItem2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),s("h2",{attrs:{id:"gestion-de-escenarios-de-planificacion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gestion-de-escenarios-de-planificacion","aria-hidden":"true"}},[a._v("#")]),a._v(" Gestión de escenarios de planificación")]),a._v(" "),s("p",[a._v("En un escenario de planificación se engloban todos los datos que se\nrepresentan en el planificador, es decir: Tareas, Vacaciones, Festivos,\nInstructores, Aulas y Escuelas.")]),a._v(" "),s("p",[a._v("Para la gestión de escenarios de planificación, se ha creado un sistema\nque guarda (o carga) todos estos datos entre la base de datos y ficheros\n"),s("em",[a._v("json")]),a._v(".")]),a._v(" "),s("p",[a._v("Cada fichero es un escenario distinto, mientras que el escenario que\nestá en la Base de datos es el "),s("em",[a._v("Escenario activo")]),a._v(", es decir, es el que\nse puede modificar en el planificador.")]),a._v(" "),s("p",[a._v("Cuando se quiere cambiar de escenario, los datos de la base de datos se\nguardan en el fichero correspondiente, luego se vacían las tablas, y se\npasan los datos del archivo del escenario que se quiere cargar a la base\nde datos.")]),a._v(" "),s("h2",{attrs:{id:"seguridad"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#seguridad","aria-hidden":"true"}},[a._v("#")]),a._v(" Seguridad")]),a._v(" "),s("p",[a._v("A continuación se describen algunos sistemas de seguridad implantados en\nel aplicativo:")]),a._v(" "),s("p",[s("strong",[a._v("1.  Autentificación")])]),a._v(" "),s("p",[a._v("Laravel incorpora todo un sistema de autentificación fácilmente\nintegrable. Para su creación simplemente se debe emplear el comando\n"),s("em",[a._v("php artisan make:auth")]),a._v(".")]),a._v(" "),s("p",[s("strong",[a._v("2.  Autorización")])]),a._v(" "),s("p",[a._v("En el aplicativo se han creado diferentes perfiles de usuario\n(instructor, responsable, administrador y superadmisnistrador) cada\nuno de ellos con sus propios permisos.")]),a._v(" "),s("p",[a._v("Para su desarrollo, se creado la columna "),s("em",[a._v("rol")]),a._v(" en la tabla "),s("em",[a._v("users")]),a._v(" y\nun método para la verificación del rol en el modelo "),s("em",[a._v("User")]),a._v(". Además, se\nhan creado diferentes "),s("em",[a._v("Gates")]),a._v(" que protegen las rutas para que no se\npuedan acceder a áreas restringidas, ni realizar operaciones\npeligrosas con la base de datos. Los "),s("em",[a._v("Gates")]),a._v(" son el sistema de\nautorización proporcionado por Laravel\n(https://laravel.com/docs/authorization).")]),a._v(" "),s("p",[s("strong",[a._v("3.  Validaciones")])]),a._v(" "),s("p",[a._v("Los formularios que realizan operaciones en la base de datos también\nson validados en el servidor. Para su desarrollo, Laravel incorpora\nuna amplia variedad de métodos de validación\n(https://laravel.com/docs/validation).")]),a._v(" "),s("p",[s("strong",[a._v("4.  Transacciones en la Base de datos")])]),a._v(" "),s("p",[a._v("Para las acciones de borrado y guardado masivo de datos en el\nservidor, se ha empleado un sistema de transacciones dentro de un\ntry-catch.")]),a._v(" "),s("p",[a._v("De esta forma, si se procede a un vaciado de datos de la tabla para su\nposterior llenado, en caso de suceder algún error, se realiza un\nrollback de toda la operación.")]),a._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("DB")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("beginTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("OPERACIONES")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("EN")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("BASE")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("DE")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("DATOS")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("DB")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[a._v('"OK"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("catch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token package"}},[a._v("Exception")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$error")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$e")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("DB")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rollback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$error")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[s("strong",[a._v("5.  Backups de datos")])]),a._v(" "),s("p",[a._v("En el servidor se ha creado un cron que realiza un guardado diario de\nlos datos (tanto de la base de datos, como de los archivos de los\nescenarios).")]),a._v(" "),s("p",[a._v("Para su desarrollo se ha creado un comando Artisan que realiza esta\nfunción de backup. A continuación, se programa la ejecución del\ncomando en el Scheduler de Laravel. Y por último, se crea el cron en\nel servidor.")])])},[],!1,null,null,null);t.default=e.exports}}]);